if(typeof Object.create!=="function"){Object.create=function(a){function b(){}"use strict";b.prototype=a;return new b}}(function(a,b,c,d){"use strict";var e={init:function(b,c){var e=this,f="#textCounter_";e.elem=c;e.$elem=a(c);e.options=a.extend({},a.fn.textCounter.options,b);f+=e.$elem.attr("id")===d?e.$elem.attr("name"):e.$elem.attr("id");if(a(f).length===0){e.$obj=a("<div></div>",{id:f,"class":e.options.defaultClass}).appendTo("body").css({display:"none",position:"absolute",top:0,left:0})}else{e.$obj=a("#"+f).css({display:"none",position:"absolute",top:0,left:0}).addClass(e.options.defaultClass)}a("<div></div>",{"class":e.options.counterPatternClass}).css({"z-index":e.options.zIndex,position:"absolute",top:0,left:0,height:"100%",width:"100%"}).appendTo(e.$obj);if(e.options.showProgressBar===true){a("<span></span>",{"class":e.options.progressBarClass}).css({"z-index":e.options.zIndex-1,position:"absolute",top:0,left:0,height:"100%"}).appendTo(e.$obj)}if(typeof e.options.posX==="string"){e.options.posX=e.options.posX.toLowerCase()}if(typeof e.options.posY==="string"){e.options.posY=e.options.posY.toLowerCase()}if(typeof e.options.countDown==="string"){e.options.countDown=e.options.countDown.toLowerCase()==="false"?false:true}if(typeof e.options.showBeforeWarn==="string"){e.options.showBeforeWarn=e.options.showBeforeWarn.toLowerCase()==="false"?false:true}if(e.options.defaultClass===""){e.options.defaultClass="textCounter"}if(e.options.txtWarningClass===""){e.options.txtWarningClass="txtWarning"}if(e.options.counterWarningClass===""){e.options.counterWarningClass="counterWarning"}if(e.options.counterPatternClass===""){e.options.counterPatternClass="counterTextPattern"}if(e.options.progressBarClass===""){e.options.progressBarClass="counterProgressBar"}e._bindEvents()},_bindEvents:function(){var a=this,b=a.options,c=b.transition,d=a.$elem,e=a.$obj;a.$elem.on("blur",function(){d.removeClass(a.options.txtWarningClass);e.removeClass(a.options.counterWarningClass);if(b.showBeforeWarn===true){if(c==="none"||!c){e.hide(0)}else{e[c](b.transitionSpeed,b.easing)}}}).on("focus",function(){e.removeClass(a.options.counterWarningClass);d.removeClass(a.options.txtWarningClass);a._checkChars();a._setXY();if(b.showBeforeWarn===true){if(c==="none"||!c){e.show(0)}else{e[c](b.transitionSpeed,b.easing)}}}).on("keydown",function(){a._checkChars()}).on("keyup",function(){a._checkChars()})},_setXY:function(){var a=this,b=0,c=0,d=a.options.posX,e=a.options.posY,f=parseInt(a.options.posXoffset,10),g=parseInt(a.options.posYoffset,10),h=a.$obj,i=a.$elem;switch(d){case"left":b=i.offset().left;break;case"center":b=i.offset().left+i.width()/2-h.width()/2;break;case"right":b=i.offset().left+i.width()-h.width()-4;break;default:b=parseInt(d,10)}switch(e){case"top":c=i.offset().top-h.height()-8;break;case"center":c=i.offset().top+i.height()/2-h.height()/2;break;case"bottom":c=i.offset().top+i.height()+9;break;default:c=parseInt(e,10)}if(d==="left"&&e==="center"){b-=h.width()+13}if(d==="right"&&e==="center"){b+=h.width()+12}if(typeof f==="number"){b+=parseInt(f,10)}if(typeof g==="number"){c+=parseInt(g,10)}h.css({top:c,left:b})},_checkChars:function(){var a=this,b=a.$elem,c=a.options,d=c.countDown,e=b.attr("maxlength"),f=0,g="",h=true;if(typeof e==="undefined"){e=c.maxLength}f=d?parseInt(Math.round(e-b.val().length),10):parseInt(Math.round(b.val().length,10),10);if(f>e||f<0){g=b.val();g=g.substring(0,e);f=d?f++:f--;b.val(g)}h=a._buildString(f,e,d);a._setClassAndShow(h)},_buildString:function(b,c,d){var e=this,f=e.options,g=f.textPattern,h=0,i=true;h=d?Math.round((c-b)/c*100):Math.round(b/c*100);if(g.indexOf("[%]")>-1){if(d){i=h<=f.warnAt?false:true}else{i=h>=100-f.warnAt?false:true}}else{if(d){i=b<=f.warnAt?false:true}else{i=c-b<=f.warnAt?false:true}}g=g.replace("[+]",b);g=g.replace("[=]",c);g=g.replace("[%]",h);a("."+f.counterPatternClass).html(g);if(f.showProgressBar===true){a("."+f.progressBarClass).animate({width:h+"%"},1)}return i},_setClassAndShow:function(a){var b=this,c=b.options,d=b.$elem,e=b.$obj,f=c.transition;if(d.hasClass(c.txtWarningClass)){if(a){d.removeClass(c.txtWarningClass)}}else{if(!a){d.addClass(c.txtWarningClass)}}if(e.hasClass(c.counterWarningClass)){if(a){e.removeClass(c.counterWarningClass);d.trigger("counterPass")}}else{if(!a){e.addClass(c.counterWarningClass);d.trigger("counterWarning")}}if(c.showBeforeWarn===false&&e.hasClass(c.counterWarningClass)&&e.is(":hidden")){if(f==="none"||!f){e.show(0)}else{e[f](c.transitionSpeed,c.easing)}}if(c.showBeforeWarn===false&&!e.hasClass(c.counterWarningClass)&&e.is(":visible")){if(f==="none"||!f){e.hide(0)}else{e[f](c.transitionSpeed,c.easing)}}}};a.fn.textCounter=function(b){return this.each(function(){var c=Object.create(e);c.init(b,this);a.data(this,"textCounter",c)})};a.fn.textCounter.options={defaultClass:"textCounter",counterWarningClass:"counterWarning",txtWarningClass:"txtWarning",counterPatternClass:"counterTextPattern",progressBarClass:"counterProgressBar",transition:"slideToggle",easing:"swing",transitionSpeed:200,posX:"right",posY:"bottom",posXoffset:0,posYoffset:0,zIndex:100,warnAt:10,showBeforeWarn:true,showProgressBar:false,maxLength:500,textPattern:"[+] / [=]",countDown:true}})(jQuery,window,document)